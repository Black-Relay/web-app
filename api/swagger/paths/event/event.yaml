get:
  tags:
    - event
  summary: Get all events stored in DB
  description: Returns an array of objects containing event data from the MQTT topics
  responses:
    '200':
      description: Array of event objects
      content:
        application/json:
          schema:
            type: array
            items:
              type: object
              properties:
                _id:
                  type: string
                  example: "671234567890abcdef123456"
                category:
                  type: string
                  enum: ["DETECT", "ALERT", "ALARM", "THREAT"]
                  example: "DETECT"
                  description: "Event severity category"
                topic:
                  type: string
                  example: "sensors/accelerometer/device01"
                  description: "MQTT topic where the event originated"
                data:
                  type: object
                  description: "Event payload data - structure varies by topic"
                  example:
                    x: 0.123
                    y: -0.456
                    z: 9.789
                    timestamp: "2024-10-10T15:30:45.123Z"
                createdAt:
                  type: string
                  format: date-time
                  example: "2024-10-10T15:30:45.123Z"
                  description: "When the event was created in the database"
                updatedAt:
                  type: string
                  format: date-time
                  example: "2024-10-10T16:45:30.456Z"
                  description: "When the event was last updated in the database"
                acknowledged:
                  type: boolean
                  example: false
                  description: "Whether the event has been acknowledged by a user"
                __v:
                  type: integer
                  example: 0
                  description: "MongoDB version field"
    '500':
      description: Server error
      content:
        application/json:
          schema:
            type: object
            properties:
              error:
                type: string
                example: "Events model not found"

post:
  tags:
    - event
  summary: Create a new event
  description: Creates a new event in the database with the provided data
  requestBody:
    required: true
    content:
      application/json:
        schema:
          type: object
          required:
            - category
            - topic
          properties:
            category:
              type: string
              enum: ["DETECT", "ALERT", "ALARM", "THREAT"]
              description: "Event severity category"
              example: "DETECT"
            topic:
              type: string
              description: "MQTT topic where the event originated"
              example: "sensors/accelerometer/device01"
            data:
              type: object
              description: "Event payload data - structure varies by topic"
              example:
                x: 0.123
                y: -0.456
                z: 9.789
                timestamp: "2024-10-10T15:30:45.123Z"
  responses:
    '201':
      description: Event created successfully
      content:
        application/json:
          schema:
            type: object
            properties:
              _id:
                type: string
                example: "671234567890abcdef123456"
              category:
                type: string
                enum: ["DETECT", "ALERT", "ALARM", "THREAT"]
                example: "DETECT"
                description: "Event severity category"
              topic:
                type: string
                example: "sensors/accelerometer/device01"
                description: "MQTT topic where the event originated"
              data:
                type: object
                description: "Event payload data - structure varies by topic"
                example:
                  x: 0.123
                  y: -0.456
                  z: 9.789
                  timestamp: "2024-10-10T15:30:45.123Z"
              createdAt:
                type: string
                format: date-time
                example: "2024-10-10T15:30:45.123Z"
                description: "When the event was created in the database"
              updatedAt:
                type: string
                format: date-time
                example: "2024-10-10T15:30:45.123Z"
                description: "When the event was last updated in the database"
              acknowledged:
                type: boolean
                example: false
                description: "Whether the event has been acknowledged by a user (always false on creation)"
              __v:
                type: integer
                example: 0
                description: "MongoDB version field"
    '400':
      description: Bad request - Invalid input data
      content:
        application/json:
          schema:
            type: object
            properties:
              error:
                type: string
                examples:
                  missing_fields:
                    value: "Category and topic are required fields"
                  invalid_category:
                    value: "Invalid event category. Must be one of: DETECT, ALERT, ALARM, THREAT"
                  validation_error:
                    value: "Validation error"
    '500':
      description: Server error
      content:
        application/json:
          schema:
            type: object
            properties:
              error:
                type: string
                example: "Events model not found"