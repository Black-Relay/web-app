get:
  tags:
    - event
  summary: Get event by ID
  description: Returns a specific event by its MongoDB ObjectId
  parameters:
    - in: path
      name: eventId
      required: true
      schema:
        type: string
        pattern: '^[0-9a-fA-F]{24}$'
      description: MongoDB ObjectId of the event
      example: "671234567890abcdef123456"
  responses:
    '200':
      description: Event object
      content:
        application/json:
          schema:
            type: object
            properties:
              _id:
                type: string
                example: "671234567890abcdef123456"
              category:
                type: string
                enum: ["DETECT", "ALERT", "ALARM", "THREAT"]
                example: "DETECT"
                description: "Event severity category"
              topic:
                type: string
                example: "sensors/accelerometer/device01"
                description: "MQTT topic where the event originated"
              data:
                type: object
                description: "Event payload data - structure varies by topic"
                example:
                  x: 0.123
                  y: -0.456
                  z: 9.789
                  timestamp: "2024-10-10T15:30:45.123Z"
              createdAt:
                type: string
                format: date-time
                example: "2024-10-10T15:30:45.123Z"
                description: "When the event was created in the database"
              updatedAt:
                type: string
                format: date-time
                example: "2024-10-10T16:45:30.456Z"
                description: "When the event was last updated in the database"
              acknowledged:
                type: boolean
                example: false
                description: "Whether the event has been acknowledged by a user"
              __v:
                type: integer
                example: 0
                description: "MongoDB version field"
    '400':
      description: Bad request - Invalid event ID format
      content:
        application/json:
          schema:
            type: object
            properties:
              error:
                type: string
                example: "Invalid event ID format"
    '404':
      description: Event not found
      content:
        application/json:
          schema:
            type: object
            properties:
              message:
                type: string
                example: "Event not found"
    '500':
      description: Server error
      content:
        application/json:
          schema:
            type: object
            properties:
              error:
                type: string
                example: "Events model not found"

patch:
  tags:
    - event
  summary: Update event by ID
  description: Updates an existing event by its MongoDB ObjectId. Commonly used to acknowledge events or modify event data.
  parameters:
    - in: path
      name: eventId
      required: true
      schema:
        type: string
        pattern: '^[0-9a-fA-F]{24}$'
      description: MongoDB ObjectId of the event to update
      example: "671234567890abcdef123456"
  requestBody:
    required: true
    content:
      application/json:
        schema:
          type: object
          properties:
            category:
              type: string
              enum: ["DETECT", "ALERT", "ALARM", "THREAT"]
              description: "Event severity category"
              example: "ALERT"
            topic:
              type: string
              description: "MQTT topic where the event originated"
              example: "sensors/accelerometer/device01"
            data:
              type: object
              description: "Event payload data - structure varies by topic"
              example:
                x: 0.123
                y: -0.456
                z: 9.789
                timestamp: "2024-10-10T15:30:45.123Z"
            acknowledged:
              type: boolean
              description: "Whether the event has been acknowledged by a user"
              example: true
          example:
            acknowledged: true
  responses:
    '200':
      description: Event updated successfully
      content:
        application/json:
          schema:
            type: object
            properties:
              _id:
                type: string
                example: "671234567890abcdef123456"
              category:
                type: string
                enum: ["DETECT", "ALERT", "ALARM", "THREAT"]
                example: "DETECT"
                description: "Event severity category"
              topic:
                type: string
                example: "sensors/accelerometer/device01"
                description: "MQTT topic where the event originated"
              data:
                type: object
                description: "Event payload data - structure varies by topic"
                example:
                  x: 0.123
                  y: -0.456
                  z: 9.789
                  timestamp: "2024-10-10T15:30:45.123Z"
              createdAt:
                type: string
                format: date-time
                example: "2024-10-10T15:30:45.123Z"
                description: "When the event was created in the database (immutable)"
              updatedAt:
                type: string
                format: date-time
                example: "2024-10-10T17:15:22.789Z"
                description: "When the event was last updated in the database (automatically set)"
              acknowledged:
                type: boolean
                example: true
                description: "Whether the event has been acknowledged by a user"
              __v:
                type: integer
                example: 0
                description: "MongoDB version field"
    '400':
      description: Bad request - Invalid input data or event ID
      content:
        application/json:
          schema:
            type: object
            properties:
              error:
                type: string
                examples:
                  missing_id:
                    value: "Event ID parameter is required"
                  invalid_id:
                    value: "Invalid event ID format"
                  invalid_category:
                    value: "Invalid event category. Must be one of: DETECT, ALERT, ALARM, THREAT"
                  validation_error:
                    value: "Validation error"
    '404':
      description: Event not found
      content:
        application/json:
          schema:
            type: object
            properties:
              message:
                type: string
                example: "Event not found"
    '500':
      description: Server error
      content:
        application/json:
          schema:
            type: object
            properties:
              error:
                type: string
                example: "Events model not found"